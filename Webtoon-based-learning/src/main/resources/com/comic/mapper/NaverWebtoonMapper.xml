<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.comic.mapper.NaverWebtoonMapper">

<resultMap id="naverWebtoonVO" type="com.comic.domain.NaverWebtoonVO">
  <result column="WEBTOON_NUM" property="webtoonNum"/>
  <result column="WEBTOON_TITLE" property="webtoonTitle"/>
  <result column="WEBTOON_AGE" property="webtoonAge"/>
  <result column="WEBTOON_INFO" property="webtoonInfo"/>
  <result column="WEBTOON_GPA" property="webtoonGpa"/>
  <result column="WEBTOON_LIKE" property="webtoonLike"/>
  <result column="WEBTOON_COVER" property="webtoonCover"/>
  <result column="WEBTOON_INTRD_COVER" property="webtoonIntrdCover"/>
  <result column="WEEK_DAY" property="weekDay"/>
  
</resultMap>

	<select id="weekSelect"	resultMap="naverWebtoonVO">
		SELECT
			NW.WEBTOON_NUM
			, NW.WEBTOON_TITLE
			, NW.WEBTOON_COVER
			, W.WEEK_DAY
		FROM
			NAVER_WEBTOON NW LEFT JOIN WEBTOON_WEEK WW
			ON NW.WEBTOON_NUM = WW.WEBTOON_NUM
			LEFT JOIN WEEK W
			ON WW.WNUM = W.WNUM
	</select>
	
	<insert id="episodeInsert" parameterType="java.util.HashMap">
	INSERT INTO WEBTOON_EPISODE 
	(episode_NUM, episode_TITLE, episode_TEXT, episode_COVER, episodeCONTENT, webtoon_NUM) 
	VALUES 
	(W_E_SEQ.NEXTVAL, #{episode_TITLE}, #{episode_TEXT}, #{episode_COVER}, #{episodeContent}, #{webtoon_NUM})
	</insert>
	
	<select id="episodeSelect" resultType="java.util.HashMap">
		SELECT * 
		FROM WEBTOON_EPISODE 
		WHERE webtoon_NUM = #{webtoon_NUM}
	</select>
	
	<select id="episodeDetailSelect" resultType="java.util.HashMap">
		SELECT * 
		FROM WEBTOON_EPISODE 
		WHERE 
			webtoon_NUM = #{webtoon_NUM} 
			AND 
			episode_NUM = #{episode_NUM}
	</select>
	
	<update id="episodeUpdate" parameterType="java.util.HashMap">
		UPDATE WEBTOON_EPISODE 
		SET episode_TITLE = #{episode_TITLE}, episode_TEXT = #{episode_TEXT}, episode_COVER = #{episode_COVER}, episodeCONTENT = #{episodeContent}
		WHERE episode_NUM = #{episode_NUM} AND webtoon_NUM = #{webtoon_NUM}
	</update>
	
	<delete id="episodeDelete" parameterType="java.util.HashMap">
		DELETE FROM WEBTOON_EPISODE
		WHERE episode_NUM = #{episode_NUM} AND webtoon_NUM = #{webtoon_NUM} 
	</delete>
	
</mapper>


